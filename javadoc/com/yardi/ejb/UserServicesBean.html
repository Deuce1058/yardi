<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.8) on Sat Jul 29 20:39:00 PDT 2023 -->
<title>UserServicesBean</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-07-29">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UserServicesBean";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UserServicesBean.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.yardi.ejb</a></div>
<h2 title="Class UserServicesBean" class="title">Class UserServicesBean</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.yardi.ejb.UserServicesBean</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">UserServicesBean</span>
extends java.lang.Object
implements <a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></pre>
<div class="block">Services for authentication and user profile management<p>
 1. Authentication
 2. Change password
 3. Password policy</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#feedback">feedback</a></span></code></th>
<td class="colLast">
<div class="block">Status of the most recent method call that provides feedback</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initialPage">initialPage</a></span></code></th>
<td class="colLast">
<div class="block">The URL of the page for the group the user belongs to.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Vector&lt;<a href="../shared/userServices/LoginInitialPage.html" title="class in com.yardi.shared.userServices">LoginInitialPage</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initialPageList">initialPageList</a></span></code></th>
<td class="colLast">
<div class="block">Vector containing the description and URL of each group the user belongs to</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../shared/userServices/LoginRequest.html" title="class in com.yardi.shared.userServices">LoginRequest</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loginRequest">loginRequest</a></span></code></th>
<td class="colLast">
<div class="block">POJO representation of the web request to login</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../shared/userServices/LoginResponse.html" title="class in com.yardi.shared.userServices">LoginResponse</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loginResponse">loginResponse</a></span></code></th>
<td class="colLast">
<div class="block">POJO representation of the response to the web request to login</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="PasswordPolicy.html" title="interface in com.yardi.ejb">PasswordPolicy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#passwordPolicyBean">passwordPolicyBean</a></span></code></th>
<td class="colLast">
<div class="block">Injected reference to com.yardi.ejb.PasswordPolicyBean</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="PwdCompositionRules.html" title="interface in com.yardi.ejb">PwdCompositionRules</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#pwdCompRulesBean">pwdCompRulesBean</a></span></code></th>
<td class="colLast">
<div class="block">Injected reference to com.yardi.ejb.PwdCompositionRulesBean</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="model/Pwd_Policy.html" title="class in com.yardi.ejb.model">Pwd_Policy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#pwdPolicy">pwdPolicy</a></span></code></th>
<td class="colLast">
<div class="block">Reference to the password policy obtained from com.yardi.ejb.PasswordPolicyBean.getPwdPolicy()</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sessionID">sessionID</a></span></code></th>
<td class="colLast">
<div class="block">The value returned by HttpServletRequest.getSession().getId()</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="SessionsTable.html" title="interface in com.yardi.ejb">SessionsTable</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sessionsBean">sessionsBean</a></span></code></th>
<td class="colLast">
<div class="block">Injected reference to com.yardi.ejb.SessionsTableBean</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.sql.Timestamp</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#today">today</a></span></code></th>
<td class="colLast">
<div class="block">Today's date and time</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) jakarta.transaction.UserTransaction</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tx">tx</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="UniqueTokens.html" title="interface in com.yardi.ejb">UniqueTokens</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#uniqueTokensBean">uniqueTokensBean</a></span></code></th>
<td class="colLast">
<div class="block">Injected reference to com.yardi.ejb.UniqueTokensBean</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="UserGroups.html" title="interface in com.yardi.ejb">UserGroups</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#userGroupsBean">userGroupsBean</a></span></code></th>
<td class="colLast">
<div class="block">Injected reference to com.yardi.ejb.UserGroupsBean</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="UserProfile.html" title="interface in com.yardi.ejb">UserProfile</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#userProfileBean">userProfileBean</a></span></code></th>
<td class="colLast">
<div class="block">Injected reference to com.yardi.ejb.UserProfileBean</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">UserServicesBean</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#authenticate()">authenticate</a></span>()</code></th>
<td class="colLast">
<div class="block">Authenticate the user.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changeUserToken(java.lang.String,char%5B%5D)">changeUserToken</a></span>&#8203;(java.lang.String&nbsp;userName,
               char[]&nbsp;newPassword)</code></th>
<td class="colLast">
<div class="block">Change the user's current token stored in USER_PROFILE database table.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#chgPwd()">chgPwd</a></span>()</code></th>
<td class="colLast">
<div class="block">Support for changing password either on demand or when the current password has expired.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFeedback()">getFeedback</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the status of the most recent method call that provides feedback.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInitialPage()">getInitialPage</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the URL of the page for the group that the user belongs to.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../shared/userServices/LoginRequest.html" title="class in com.yardi.shared.userServices">LoginRequest</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLoginRequest()">getLoginRequest</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the POJO representation of the web request to login.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../shared/userServices/LoginResponse.html" title="class in com.yardi.shared.userServices">LoginResponse</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLoginResponse()">getLoginResponse</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the POJO representation of the response to the web request to login.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private <a href="model/Pwd_Policy.html" title="class in com.yardi.ejb.model">Pwd_Policy</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPwdPolicy()">getPwdPolicy</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the password policy obtained from com.yardi.ejb.PasswordPolicyBean.getPwdPolicy().</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSessionID()">getSessionID</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the session ID which is equivalent to HttpServletRequest.getSession().getId().</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loginSuccess()">loginSuccess</a></span>()</code></th>
<td class="colLast">
<div class="block">When the user successfully authenticates, this method will either persist or update the Sessions_Table entity.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#remove()">remove</a></span>()</code></th>
<td class="colLast">
<div class="block">Stateful session bean remove method.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#rollback(jakarta.transaction.UserTransaction)">rollback</a></span>&#8203;(jakarta.transaction.UserTransaction&nbsp;tx)</code></th>
<td class="colLast">
<div class="block">Attempt to roll back the transaction</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLoginRequest(com.yardi.shared.userServices.LoginRequest)">setLoginRequest</a></span>&#8203;(<a href="../shared/userServices/LoginRequest.html" title="class in com.yardi.shared.userServices">LoginRequest</a>&nbsp;loginRequest)</code></th>
<td class="colLast">
<div class="block">Inject the request from the web to login.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLoginResponse()">setLoginResponse</a></span>()</code></th>
<td class="colLast">
<div class="block">Construct the POJO response to the request to login.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPwdPolicy()">setPwdPolicy</a></span>()</code></th>
<td class="colLast">
<div class="block">Obtain a reference to password policy from com.yardi.ejb.PasswordPolicyBean.getPwdPolicy().</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setSessionID(java.lang.String)">setSessionID</a></span>&#8203;(java.lang.String&nbsp;sessionID)</code></th>
<td class="colLast">
<div class="block">Set field <i>sessionID</i>.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#txStatus()">txStatus</a></span>()</code></th>
<td class="colLast">
<div class="block">Log the transaction status</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="pwdPolicy">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pwdPolicy</h4>
<pre>private&nbsp;<a href="model/Pwd_Policy.html" title="class in com.yardi.ejb.model">Pwd_Policy</a> pwdPolicy</pre>
<div class="block">Reference to the password policy obtained from com.yardi.ejb.PasswordPolicyBean.getPwdPolicy()</div>
</li>
</ul>
<a id="feedback">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>feedback</h4>
<pre>private&nbsp;java.lang.String feedback</pre>
<div class="block">Status of the most recent method call that provides feedback<p> 
 Clients can read this field to determine the status of the most recent method call that provides feedback.</div>
</li>
</ul>
<a id="today">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>today</h4>
<pre>private&nbsp;java.sql.Timestamp today</pre>
<div class="block">Today's date and time</div>
</li>
</ul>
<a id="loginRequest">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loginRequest</h4>
<pre>private&nbsp;<a href="../shared/userServices/LoginRequest.html" title="class in com.yardi.shared.userServices">LoginRequest</a> loginRequest</pre>
<div class="block">POJO representation of the web request to login</div>
</li>
</ul>
<a id="loginResponse">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loginResponse</h4>
<pre>private&nbsp;<a href="../shared/userServices/LoginResponse.html" title="class in com.yardi.shared.userServices">LoginResponse</a> loginResponse</pre>
<div class="block">POJO representation of the response to the web request to login</div>
</li>
</ul>
<a id="initialPageList">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialPageList</h4>
<pre>private&nbsp;java.util.Vector&lt;<a href="../shared/userServices/LoginInitialPage.html" title="class in com.yardi.shared.userServices">LoginInitialPage</a>&gt; initialPageList</pre>
<div class="block">Vector containing the description and URL of each group the user belongs to</div>
</li>
</ul>
<a id="initialPage">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialPage</h4>
<pre>private&nbsp;java.lang.String initialPage</pre>
<div class="block">The URL of the page for the group the user belongs to.<p>
 If the user belongs to multiple groups the field initialPage is set to views/selectGroup.html.</div>
</li>
</ul>
<a id="sessionID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sessionID</h4>
<pre>private&nbsp;java.lang.String sessionID</pre>
<div class="block">The value returned by HttpServletRequest.getSession().getId()</div>
</li>
</ul>
<a id="userProfileBean">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>userProfileBean</h4>
<pre><a href="UserProfile.html" title="interface in com.yardi.ejb">UserProfile</a> userProfileBean</pre>
<div class="block">Injected reference to com.yardi.ejb.UserProfileBean</div>
</li>
</ul>
<a id="uniqueTokensBean">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uniqueTokensBean</h4>
<pre><a href="UniqueTokens.html" title="interface in com.yardi.ejb">UniqueTokens</a> uniqueTokensBean</pre>
<div class="block">Injected reference to com.yardi.ejb.UniqueTokensBean</div>
</li>
</ul>
<a id="passwordPolicyBean">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>passwordPolicyBean</h4>
<pre><a href="PasswordPolicy.html" title="interface in com.yardi.ejb">PasswordPolicy</a> passwordPolicyBean</pre>
<div class="block">Injected reference to com.yardi.ejb.PasswordPolicyBean</div>
</li>
</ul>
<a id="userGroupsBean">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>userGroupsBean</h4>
<pre><a href="UserGroups.html" title="interface in com.yardi.ejb">UserGroups</a> userGroupsBean</pre>
<div class="block">Injected reference to com.yardi.ejb.UserGroupsBean</div>
</li>
</ul>
<a id="sessionsBean">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sessionsBean</h4>
<pre><a href="SessionsTable.html" title="interface in com.yardi.ejb">SessionsTable</a> sessionsBean</pre>
<div class="block">Injected reference to com.yardi.ejb.SessionsTableBean</div>
</li>
</ul>
<a id="pwdCompRulesBean">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pwdCompRulesBean</h4>
<pre><a href="PwdCompositionRules.html" title="interface in com.yardi.ejb">PwdCompositionRules</a> pwdCompRulesBean</pre>
<div class="block">Injected reference to com.yardi.ejb.PwdCompositionRulesBean</div>
</li>
</ul>
<a id="tx">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>tx</h4>
<pre>jakarta.transaction.UserTransaction tx</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UserServicesBean</h4>
<pre>public&nbsp;UserServicesBean()</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="authenticate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticate</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;authenticate()</pre>
<div class="block">Authenticate the user.<p> 
 
 If the user is in the process of changing their password then the transaction begins with method chgPwd(). Method chgPwd() makes the user authenticate again 
 by calling this method. This is why the transaction can not begin with authenticate() if the user is in the process of changing their password.<p>
 
 Authentication is delegated to com.yadi.ejb.UserProfileBean.authenticate().<br><br>
 <div style="display:flex; flex-direction: row">
   <div>
     <strong><u>If the user successfully authenticates:</u></strong>
     <ul>
       <li>
         If the persistence context has no Sessions_Table entity matching the session ID and the SESSIONS_TABLE database table has no row matching session 
         ID then persist the Sessions_Table entity.
       </li>
       <li>
         If the persistence context has a Sessions_Table entity matching the session ID then update the Sessions_Table entity.
       </li>
       <li>
         Construct com.yardi.shared.userServices.LoginResponse.
       </li>
       <li>
         If the user is not changing the password then commit the transaction. Otherwise, method chgPwd() will determine when to commit the transaction.
       </li>
     </ul>
   </div>
   <div>
     <strong><u>If authentication fails:</u></strong>
     <ul>
       <li>
         If the feedback is <span style="font-family:consolas;">YRD000C, YRD000F or YRD0002</span> and the user is not in the process of changing their password then commit the transaction. 
         Otherwise, method chgPwd() determines when to commit the transaction.
       </li>
       <li>
         If the feedback is <span style="font-family:consolas;">YRD000F</span> then set the feedback to <span style="font-family:consolas;">YRD0001</span>.
       </li>
       <li>
         If the user fails to authenticate for a reason other than <span style="font-family:consolas;">YRD000C, YRD000F or YRD0002</span> and the user 
         is not in the process of changing their password then rollback the transaction. Otherwise, method chgPwd() determines what happens to the transaction.
       </li>
     </ul>
   </div>
 </div>
 <p>
 
 <strong>The following feedback is provided:</strong><br>
 <pre>
 YRD0000 normal completion
 YRD0001 Invalid user name or password
 YRD0002 the password has expired
 YRD0003 the User_Profile entity is disabled (user cant login). Password must be reset to login
 YRD0004 the User_Profile entity is inactive. Administrator must clear the inactive flag to login
 YRD000B password policy is missing
 YRD000C maximum signon attempts exceeded. The User_Profile entity is disabled
 YRD000E User belongs to multiple groups
 YRD000F invalid password
 </pre></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#authenticate()">authenticate</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean indicating whether authentication was successful or unsuccessful</dd>
</dl>
</li>
</ul>
<a id="changeUserToken(java.lang.String,char[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeUserToken</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;changeUserToken&#8203;(java.lang.String&nbsp;userName,
                             char[]&nbsp;newPassword)</pre>
<div class="block">Change the user's current token stored in USER_PROFILE database table.<p>
 
 Delegate to com.yardi.ejb.UserProfileBean.changeUserToken() to set a new hashed password.<p>
 
 Delegate to com.yardi.ejb.UserProfileBean.loginSuccess() to give the user credit for successfully authenticating although they have not yet
 completed the change password process.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userName</code> - identifies the user profile to change</dd>
<dd><code>newPassword</code> - char array containing the new password in plain text</dd>
</dl>
</li>
</ul>
<a id="chgPwd()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chgPwd</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;chgPwd()</pre>
<div class="block">Support for changing password either on demand or when the current password has expired.<p>
 The transaction begins and ends here, not in method authenticate().<p>
 Before the user is able to change their password, they must first authenticate using their current credentials.<p>
 Database table PWD_POLICY has parameters that control password policy.<br><br>
 
 <div style="display:flex; flex-direction: row">
   <div>
     <strong><u>Authentication was unsuccessful</u></strong>
     <ul>
       <li>
         If the reason was <span style="font-family:consolas;">YRD000C</span> or <span style="font-family:consolas;">YRD0001</span> commit the transaction
       </li>
       <li>
         If the reason was not <span style="font-family:consolas;">YRD000C</span> and not <span style="font-family:consolas;">YRD0001</span> 
         rollback the transaction 
       </li>
       <li>
         Return false indicating that the change password request was not successful
       </li>
     </ul>
   </div>
   <div style="padding-left: 5px">
     <strong><u>Authentication was successful</u></strong>
     <ul>
       <li>
         Get the password policy from com.yardi.ejb.PasswordPolicyBean.getPwdPolicy().
       </li>
       <li>
         If the user has more stored tokens in history than the maximum number of tokens to store per user, as defined in password policy, then 
         remove the extra tokens. This can happen if the maximum number of tokens to store per user in password policy is changed.
       </li>
       <li>
         If the new password does not comply with password policy then rollback the transaction and return false to indicate the change password 
         request was unsuccessful
       </li>
       <li>
         Remove the oldest stored token in history for this user so that when the current token is saved in history, the number of tokens being stored 
         for this user does not exceed the maximum number of tokens to store per user as defined in password policy. 
       </li>
       <li>
         If unique tokens is being enforced in password policy then save the current token in history.
       </li>
       <li>
         Change the token in the User_Profile entity to the new token.
       </li>       
       <li>
         If the persistence context has no Sessions_Table entity matching the session ID and the SESSIONS_TABLE database table has no row matching session 
         ID then persist the Sessions_Table entity.
       </li>
       <li>
         If the persistence context has a Sessions_Table entity matching the session ID then update the Sessions_Table entity.
       </li>
       <li>
         Commit the transaction.
       </li>
       <li>
         Return true to indicate the change password request was successful.
       </li>       
     </ul>
   </div>
 </div>
 <p>
 <strong>The following feedback is provided:</strong><br>
 <pre>
 YRD0000 normal completion
 YRD0001 Invalid user name or password
 YRD0002 the password has expired
 YRD0003 the User_Profile entity is disabled (user cant login). Password must be reset to login
 YRD0004 the User_Profile entity is inactive. Administrator must clear the inactive flag to login
 YRD0005 Password must be at least %n characters long
 YRD0006 Password must contain at least 1 upper case
 YRD0007 Password must contain at least 1 lower case
 YRD0008 Password must contain at least 1 number
 YRD0009 Password must contain at least 1 special character
 YRD000A Password matches a password that was previously used
 YRD000B Password policy is missing
 YRD000C maximum signon attempts exceeded. The User_Profile entity is disabled
 YRD000E User belongs to multiple groups
 YRD000F invalid password
 YRD0010 New password must not contain current password
 YRD0011 New password must not contain user name in any case
 YRD0015 Password must not be longer than %n characters
 YRD0016 Password contains more than %n repeated characters
 YRD0017 Password must contain at least %n numbers
 YRD0018 Password must contain at least %n upper case characters
 YRD0019 Password must contain at least %n lower case characters
 YRD001A Password must contain at least %n special characters
 </pre></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#chgPwd()">chgPwd</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean indicating whether the change password process was successful</dd>
</dl>
</li>
</ul>
<a id="getFeedback()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFeedback</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getFeedback()</pre>
<div class="block">Returns the status of the most recent method call that provides feedback.<p>
 Clients call <i>getFeedback()</i> to determine the status of the most recent method call that provides feedback.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#getFeedback()">getFeedback</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>feedback from the most recent method call that provides feedback.</dd>
</dl>
</li>
</ul>
<a id="getInitialPage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitialPage</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getInitialPage()</pre>
<div class="block">Returns the URL of the page for the group that the user belongs to.<p>
 
 If the user belongs to multiple groups the field <i>initialPage</i> is set to <i>views/selectGroup.html</i>. The initial page is selected 
 by the user from a list of initial page names and descriptions representing each group they belong to.<br><br></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#getInitialPage()">getInitialPage</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the user's initial page.</dd>
</dl>
</li>
</ul>
<a id="getLoginRequest()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLoginRequest</h4>
<pre class="methodSignature">public&nbsp;<a href="../shared/userServices/LoginRequest.html" title="class in com.yardi.shared.userServices">LoginRequest</a>&nbsp;getLoginRequest()</pre>
<div class="block">Returns the POJO representation of the web request to login.<p> The login request contains the user's credentials, message ID, message description, 
 string indicating whether user is changing their password, boolean indicating whether user is changing their password and the session ID which is 
 equivalent to HttpServletRequest.getSession().getId().</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#getLoginRequest()">getLoginRequest</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>POJO representation of the web request to login.</dd>
</dl>
</li>
</ul>
<a id="getLoginResponse()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLoginResponse</h4>
<pre class="methodSignature">public&nbsp;<a href="../shared/userServices/LoginResponse.html" title="class in com.yardi.shared.userServices">LoginResponse</a>&nbsp;getLoginResponse()</pre>
<div class="block">Returns the POJO representation of the response to the web request to login.<p>
 The login response contains the user's credentials, message ID and message description. Field <i>loginResponse</i> is converted to JSON when
 responding to the web request.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#getLoginResponse()">getLoginResponse</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>POJO representation of the response to the web request to login.</dd>
</dl>
</li>
</ul>
<a id="getPwdPolicy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPwdPolicy</h4>
<pre class="methodSignature">private&nbsp;<a href="model/Pwd_Policy.html" title="class in com.yardi.ejb.model">Pwd_Policy</a>&nbsp;getPwdPolicy()</pre>
<div class="block">Returns the password policy obtained from com.yardi.ejb.PasswordPolicyBean.getPwdPolicy().</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>reference to Pwd_Policy entity</dd>
</dl>
</li>
</ul>
<a id="getSessionID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSessionID</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getSessionID()</pre>
<div class="block">Returns the session ID which is equivalent to HttpServletRequest.getSession().getId().</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#getSessionID()">getSessionID</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the value of field <i>sessionID</i></dd>
</dl>
</li>
</ul>
<a id="loginSuccess()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loginSuccess</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;loginSuccess()
                   throws com.fasterxml.jackson.core.JsonProcessingException</pre>
<div class="block">When the user successfully authenticates, this method will either persist or update the Sessions_Table entity.<p>
  
 If there is a Sessions_Table entity that matches the session ID in the persistence context then the Sessions_Table entity is updated.
 If the persistence context does not have a Sessions_Table entity that matches the session ID and the SESSIONS_TABLE database table has 
 no row matching the session ID then the Sessions_Table entity is persisted.<p>
 
 The actual update or persist is delegated to com.yardi.ejb.SessionsTableBean.<br><br></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.fasterxml.jackson.core.JsonProcessingException</code> - problems encountered when processing (parsing, generating) JSON content</dd>
</dl>
</li>
</ul>
<a id="remove()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;remove()</pre>
<div class="block">Stateful session bean remove method.<p>
 Clients call this method so that com.yardi.ejb.UserServicesBean can release resources it has before being removed.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#remove()">remove</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
</dl>
</li>
</ul>
<a id="rollback(jakarta.transaction.UserTransaction)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollback</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;rollback&#8203;(jakarta.transaction.UserTransaction&nbsp;tx)</pre>
<div class="block">Attempt to roll back the transaction</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tx</code> - - The transaction to roll back</dd>
</dl>
</li>
</ul>
<a id="setLoginRequest(com.yardi.shared.userServices.LoginRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLoginRequest</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setLoginRequest&#8203;(<a href="../shared/userServices/LoginRequest.html" title="class in com.yardi.shared.userServices">LoginRequest</a>&nbsp;loginRequest)</pre>
<div class="block">Inject the request from the web to login.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#setLoginRequest(com.yardi.shared.userServices.LoginRequest)">setLoginRequest</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
</dl>
</li>
</ul>
<a id="setLoginResponse()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLoginResponse</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;setLoginResponse()
                       throws com.fasterxml.jackson.core.JsonProcessingException</pre>
<div class="block">Construct the POJO response to the request to login.<p>
 
 This response consists of the user name, a JSON array of the description and URL of each group the user belongs to, message ID and the URL 
 of the initial for the group that the user belongs to.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.fasterxml.jackson.core.JsonProcessingException</code> - problems encountered when processing (parsing, generating) JSON content</dd>
</dl>
</li>
</ul>
<a id="setPwdPolicy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPwdPolicy</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;setPwdPolicy()</pre>
<div class="block">Obtain a reference to password policy from com.yardi.ejb.PasswordPolicyBean.getPwdPolicy().<p>
 
 <strong>The following feedback is provided:</strong><br>
 <span style="font-family:consolas;">YRD000B Password policy is missing</span></div>
</li>
</ul>
<a id="setSessionID(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSessionID</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;setSessionID&#8203;(java.lang.String&nbsp;sessionID)</pre>
<div class="block">Set field <i>sessionID</i>.<p></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="UserServices.html#setSessionID(java.lang.String)">setSessionID</a></code>&nbsp;in interface&nbsp;<code><a href="UserServices.html" title="interface in com.yardi.ejb">UserServices</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sessionID</code> - the value to set. Equivalent to HttpServletRequest.getSession().getId().</dd>
</dl>
</li>
</ul>
<a id="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a id="txStatus()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>txStatus</h4>
<pre class="methodSignature">private&nbsp;void&nbsp;txStatus()</pre>
<div class="block">Log the transaction status</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/UserServicesBean.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
